<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tuotteet</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="stylesheet.css">
</head>
<body class="Tuotteet">

       <header>
    <div class="container">
       <div class="row align-items-center">

        <div class="col-md-3">
            <a href="index.html">
                <div class="col-md-6"><img src="Images/logo.png" alt="Nocco logo" class="img-fluid"> </div>
            </a>
        </div>

            <div class="col-md-6"> 
                <nav class="d-flex justify-content-end align-items-center">
                    <ul class="nav">
                        <li class="nav-item"><a class="nav-link" href="index.html">Etusivu</a></li> 
                        <li class="nav-item"><a class="nav-link" href="Tuotteet.html">Tuotteet</a></li> 
                        <li class="nav-item"><a class="nav-link" href="Yhteystiedot.html">Yhteystiedot</a></li> 
                        <li class="nav-item"><a class="nav-link" href="Ajankohtaista.html">Ajankohtaista</a></li>
                    </ul>
                    <a href="Svenska.html" class="ms-3 language-switch">Svenska</a>
                </nav>
            </div>
        </div>
    </div>
    </header>

    <main>
        <article>
            <h1 class="text-center">TUOTTEET</h1>
                <div id="tuoteinfo"></div>
                <div id='Noccotaulukko'></div>
         </article>
    </main>

<!--php tiedostojen tiedot alkaa-->
<script> //Sivu latautuu ja kutsuu luenocon
window.onload = function() {
    luenocco();
};
</script>

<script>
function luenocco(){
	xmlhttp = new XMLHttpRequest();
	xmlhttp.onreadystatechange = function() {
	  if (this.readyState == 4 && this.status == 200) {
		    document.getElementById("Noccotaulukko").innerHTML = this.responseText;
	  }
	};
	xmlhttp.open("GET", "luenocco.php", true);
	xmlhttp.send();	
}
//Luo AJAX-pyynnön ja hakee luenocco.php tiedot ja tuo ne sivulle.
</script>
<p>
</p>

<script>
function lisaanocco(lomake, taulu){
    var nocco = {};
    nocco.maku = lomake.maku.value;
    nocco.kuvaus = lomake.kuvaus.value;
    nocco.kuva = lomake.kuva.value;
    nocco.taulu = taulu;

    var json = JSON.stringify(nocco);

    var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            document.getElementById("result").innerHTML = this.responseText;
            luenocco();
        }
    };
    xmlhttp.open("POST", "lisaanocco.php", true);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.send("nocco=" + json);
}
// Pystyy lisätä tuotteita sivulle ja taulu meinaa joko focus tai bcaa määritelty aikasemmin. Hakee tiedot lisaanocco.php.
</script>

<script>
function naytaTuote(id, taulu){
    let xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function(){
        if(this.readyState == 4 && this.status == 200){
            document.getElementById("tuoteinfo").innerHTML = this.responseText;
        }
    };
    xmlhttp.open("GET", "haetuote.php?id=" + id + "&taulu=" + taulu, true);
    xmlhttp.send();
}
//Hakee haetuote.php oikean tuotteen tietokannasta kun sivulla painaa tuotetta ja antaa sivulle sen tuotteen tiedot.
</script>

<script>
function paivitaNocco() {
    let nocco = {
        id: document.getElementById("id").value,
        maku: document.getElementById("maku").value,
        kuvaus: document.getElementById("kuvaus").value,
        kuva: document.getElementById("kuva").value,
        taulu: document.getElementById("taulu").value
    };

    let json = JSON.stringify(nocco);

    let xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function() {
        if (this.readyState === 4 && this.status === 200) {
            console.log("Päivitetty:", this.responseText);
        }
    };

    xhr.open("POST", "paivitanocco.php", true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send("nocco=" + json);
}
//Ensin luodaan tiedot lomakkeesta. Sitten luodaan nocco ja muutetaan se JSON:iksi. Haetaan tiedot paivitanocco.php. Lopuksi vastaus näkyy console.logissa.
</script>

<script>
function poistaNocco(id, taulu) {
    if (!confirm("Haluatko varmasti poistaa tämän tuotteen?")) {
        return;
    }

    let data = { id: id, taulu: taulu };
    let json = JSON.stringify(data);

    let xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function() {
        if (this.readyState === 4) {
            alert(this.responseText);
            luenocco(); // Päivitä tuotelista
            document.getElementById("tuoteinfo").innerHTML = ""; // Tyhjennä tuoteinfo
        }
    };

    xhr.open("POST", "poistanocco.php", true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send("nocco=" + json);
}
</script>





<form>
Maku: <input type="text" name="maku"><br>
Kuvaus: <input type="text" name="kuvaus"><br>
Kuva: <input type="text" name="kuva"><br>
<input type="button" value="Lisää BCAA" onclick="lisaanocco(this.form, 'bcaa')">
</form>
<!--Bcaa lisäys painikkeet-->
<form>
Maku: <input type="text" name="maku"><br>
Kuvaus: <input type="text" name="kuvaus"><br>
Kuva: <input type="text" name="kuva"><br>
<input type="button" value="Lisää FOCUS" onclick="lisaanocco(this.form, 'focus')">
</form>
<!--Focus lisäys painikkeet-->
<form onsubmit="event.preventDefault(); paivitaNocco();"> <!--Estää lomaketta lataamasta sivua uudelleen ja kutsuu javascript funktiota-->
    ID: <input type="text" id="id"><br>
    Maku: <input type="text" id="maku"><br>
    Kuvaus: <input type="text" id="kuvaus"><br>
    Kuva: <input type="text" id="kuva"><br>

    <select id="taulu">
        <option value="bcaa">BCAA</option>
        <option value="focus">FOCUS</option>
    </select><br>

    <button type="submit">Päivitä</button>
</form>
<!--Lomake joka tuo sivulle painikkeet-->


<!--Php tiedostojen asiat loppuu-->
                

<footer>
  <div class="container-fluid py-4">
    <div class="row align-items-center">
     
      <div class="col-md-3 d-flex align-items-center">
        <img src="Images/Alalogo.png" alt="Nocco logo" width="100" class="img-fluid">
      </div>

      <div class="col-md-9">
        <div class="row text-start">
          <div class="col-md-4 mb-2">COOKIES SETTINGS</div>
          <div class="col-md-4 mb-2">PRIVACY POLICY</div>
          <div class="col-md-4 mb-2">ABOUT US</div>
          <div class="col-md-4 mb-2">CONTACT US</div>
          <div class="col-md-4 mb-2">&copy; NOCON OY</div>
          <div class="col-md-4 mb-2">TEHTAANKATU 27-29, HELSINKI</div>
        </div>
      </div>

      <div class="col-md-18 text-end"> 
        <img src="Images/instagram.png" alt="Instagram logo" width="30"> 
        <span class="ig-handle"><a href="https://www.instagram.com/noccofinland/">@noccofinland</a></span> 
    </div>

    </div>
  </div>
</footer>



     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>



